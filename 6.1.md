# Домашнее задание к занятию "6.1. Типы и структура СУБД"
<details>
	<summary></summary>
      <br>
## Введение

Перед выполнением задания вы можете ознакомиться с 
[дополнительными материалами](https://github.com/netology-code/virt-homeworks/tree/master/additional/README.md).

## Задача 1

Архитектор ПО решил проконсультироваться у вас, какой тип БД 
лучше выбрать для хранения определенных данных.

Он вам предоставил следующие типы сущностей, которые нужно будет хранить в БД:

- Электронные чеки в json виде
```
Документо-ориентированые БД, например, MongoDB, т.к. документы в ней хранятся в JSON или BSON.
```
- Склады и автомобильные дороги для логистической компании
```
Графовые БД, т.к. цель - оптимизация пути от точки А до точки Б.
```
- Генеалогические деревья
```
Сетевая СУБД подойдет лучше всего, так как в этом случае у потомка может быть несколько связей с несколькими родителями.
Но можно также использовать и графовую СУБД.
```
- Кэш идентификаторов клиентов с ограниченным временем жизни для движка аутенфикации
```
Подойдет СУБД ключ-значение, где ключ - это идентификатор, а значение - имя клиента.
```
- Отношения клиент-покупка для интернет-магазина
```
Подойдет реляционная СУБД, т.к. у интернет-магазина много клиентов, много покупок, много товаров или услуг и каждая из этих сущностей обладает множеством свойств.
```

Выберите подходящие типы СУБД для каждой сущности и объясните свой выбор.
</details>
## Задача 2

Вы создали распределенное высоконагруженное приложение и хотите классифицировать его согласно 
CAP-теореме. Какой классификации по CAP-теореме соответствует ваша система, если 
(каждый пункт - это отдельная реализация вашей системы и для каждого пункта надо привести классификацию):

<details>
	<summary></summary>
      <br>

- Данные записываются на все узлы с задержкой до часа (асинхронная запись)


```
согласно CAP-теореме:
CP обеспечивается согласованность и устойчивость к разделению в ущерб доступности.

согласно PACELC-теореме: 
PC/EC
```

Пожалуйста, уточните, как вы выбирали такой вариант?
При асинхронной записи в реплику разве есть полная консистентность данных?
```commandline
согласно CAP-теореме: вариант AP -обеспечивается доступность и устойчивость к разделению в ущерб согласованности.
При асинхронной записи в реплику нет полной консистентности данных.

согласно PACELC-теореме:
PA-EL
```
</details>

- При сетевых сбоях, система может разделиться на 2 раздельных кластера
<details>
	<summary></summary>
      <br>

```
согласно CAP-теореме:
AP обеспечивается доступность и устойчивость к разделению в ущерб согласованности.

согласно PACELC-теореме:

PA/EL
```

Возможны ли другие варианты?
```
CA, EL-PC
```
Подразумевается PC/EL?
```
да
```

Разве CA может продолжать работу в разделенном P состоянии?

```commandline
нет
```


Тогда остаются варианты AP и CP ?
```commandline
AP
```
</details>

Откуда в задаче требование к Availability при разделении?

Почему не может быть CP?

```
CP обеспечивается согласованность и устойчивость к разделению в ущерб доступности
```

<details>
	<summary></summary>
      <br>

-Система может не прислать корректный ответ или сбросить соединение

```
согласно CAP-теореме:
CP обеспечивается согласованность и устойчивость.

согласно PACELC-теореме:
PC/EC
```

Возможен ли дополнительно вариант PC/EL?
```commandline
нет
```
А согласно PACELC-теореме, как бы вы классифицировали данные реализации?



## Задача 3

Могут ли в одной системе сочетаться принципы BASE и ACID? Почему?
```
Не могут.
BASE ориентирован на производительность системы (доступность), ACID на сохранность данных(стойкость к разделению и сохранность данных).
Согласно CAP-теореме системы с такими качествами будут находиться на разных ребрах треугольника.
```

## Задача 4

Вам дали задачу написать системное решение, основой которого бы послужили:

- фиксация некоторых значений с временем жизни
- реакция на истечение таймаута

Вы слышали о key-value хранилище, которое имеет механизм [Pub/Sub](https://habr.com/ru/post/278237/). 
Что это за система? Какие минусы выбора данной системы?
```
Redis - это СУБД типа key-value, которая может использоваться для реализации кэшей, брокеров сообщений (механизм pub/sub).
Минусы Redis:
- Требуютсядостаточные ресурсы RAM 
- Отсутсвие поддержки языка SQL, т.е. проблема оперативного поиска данных  
- При отказе сервера все данные с последней синхронизации с диском будут утеряны
```
</details>